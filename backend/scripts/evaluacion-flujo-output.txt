âœ… Conectado a MongoDB

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EVALUACIÃ“N COMPLETA DEL FLUJO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Flow: WooCommerce Flow
ID: 695a156681f6d67f0ae9cf40
Nodos: 9
Edges: 8

ğŸ“š HISTORIAL DE CONVERSACIÃ“N SIMULADO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. user: Hola
2. assistant: Â¡Hola! Â¿En quÃ© puedo ayudarte?
3. user: Estoy buscando harry potter 3
4. assistant: Â¿De quÃ© editorial y ediciÃ³n?
5. user: no sÃ© la editorial ni la ediciÃ³n

ğŸ“‹ VARIABLES GLOBALES INICIALES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   telefono_cliente = "5493794946066"
   telefono_empresa = "5493794057297"
   phoneNumberId = "906667632531979"
   mensaje_usuario = "no sÃ© la editorial ni la ediciÃ³n"
   titulo = null
   editorial = null
   edicion = null

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NODO 1: TRIGGER (WhatsApp Watch Events)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ID: webhook-whatsapp
Tipo: webhook
Label: WhatsApp Business Cloud

ğŸ“¥ INPUT:
   Mensaje de WhatsApp recibido

ğŸ“¤ OUTPUT:
{
  "message": "no sÃ© la editorial ni la ediciÃ³n",
  "from": "5493794946066",
  "to": "5493794057297",
  "phoneNumberId": "906667632531979"
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NODO 2: GPT CONVERSACIONAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ID: gpt-conversacional
Tipo: gpt
Label: OpenAI (ChatGPT, Sera...
Config Tipo: conversacional
Modelo: gpt-3.5-turbo

ğŸ“‹ PERSONALIDAD:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Eres amigable, profesional y persistente. Ayudas a los clientes de manera conversacional pero SIEMPRE recopilas los 3 datos: tÃ­tulo, editorial, ediciÃ³n.

ğŸ“š TÃ“PICOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Especialidad en Libros de InglÃ©s
   Veo Veo Libros es una librerÃ­a especializada en libros en inglÃ©s. Ofrecemos una amplia variedad de t...

2. Formas de Pago
   Aceptamos efectivo, transferencia bancaria, tarjeta de crÃ©dito y dÃ©bito. Ofrecemos facilidades de pa...

3. EnvÃ­os
   Realizamos envÃ­os a todo el paÃ­s. El costo y tiempo de entrega dependen de la ubicaciÃ³n. EnvÃ­os grat...

4. BÃºsqueda de Libros
   Para buscar un libro necesitamos: TÃ­tulo (obligatorio), Editorial (obligatorio), EdiciÃ³n (obligatori...

ğŸ”§ SYSTEM PROMPT CONSTRUIDO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# PERSONALIDAD
Eres amigable, profesional y persistente. Ayudas a los clientes de manera conversacional pero SIEMPRE recopilas los 3 datos: tÃ­tulo, editorial, ediciÃ³n.

# INFORMACIÃ“N DISPONIBLE
## 1. Especialidad en Libros de InglÃ©s
Veo Veo Libros es una librerÃ­a especializada en libros en inglÃ©s. Ofrecemos una ...
## 2. Formas de Pago
Aceptamos efectivo, transferencia bancaria, tarjeta de crÃ©dito y dÃ©bito. Ofrecem...
## 3. EnvÃ­os
Realizamos envÃ­os a todo el paÃ­s. El costo y tiempo de entrega dependen de la ub...
## 4. BÃºsqueda de Libros
Para buscar un libro necesitamos: TÃ­tulo (obligatorio), Editorial (obligatorio),...

ğŸ“¨ USER MESSAGE:
"no sÃ© la editorial ni la ediciÃ³n"

ğŸ¤– RESPUESTA ESPERADA:
   (GPT responde basado en personalidad + tÃ³picos + historial)
   DeberÃ­a reconocer que el usuario no sabe editorial/ediciÃ³n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NODO 3: GPT FORMATEADOR (CRÃTICO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ID: gpt-formateador
Tipo: gpt
Label: OpenAI (ChatGPT, Sera...
Config Tipo: formateador
Modelo: gpt-3.5-turbo

ğŸ“‹ EXTRACTION CONFIG - SYSTEM PROMPT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Extrae datos del historial completo.

VARIABLES:
- titulo: TÃ­tulo del libro
- editorial: Editorial
- edicion: EdiciÃ³n

REGLAS:

1. Usuario MENCIONA el dato â†’ extraer valor exacto
   "scholastic" â†’ editorial: "scholastic"

2. Usuario dice NO SÃ‰ / NO TENGO / NO IMPORTA â†’ extraer "cualquiera"
   "no sÃ©" â†’ "cualquiera"
   "no sÃ© la editorial" â†’ editorial: "cualquiera"
   "no tengo idea" â†’ "cualquiera"
   "no me acuerdo" â†’ "cualquiera"
   "no importa" â†’ "cualquiera"
   "cualquiera" â†’ "cualquiera"
   "la que sea" â†’ "cualquiera"
   "dame opciones" â†’ "cualquiera"

3. Usuario NO menciona nada â†’ extraer null

EJEMPLOS:

Historial:
Usuario: "harry potter 3"
Asistente: "Â¿Editorial y ediciÃ³n?"
Usuario: "no sÃ© la editorial ni la ediciÃ³n"
â†’ {"titulo": "harry potter 3", "editorial": "cualquiera", "edicion": "cualquiera"}

Historial:
Usuario: "harry potter 3"
Asistente: "Â¿Editorial?"
Usuario: "cualquiera estÃ¡ bien"
â†’ {"titulo": "harry potter 3", "editorial": "cualquiera", "edicion": "cualquiera"}

Historial:
Usuario: "harry potter 3"
Asistente: "Â¿Editorial?"
Usuario: "dame opciones"
â†’ {"titulo": "harry potter 3", "editorial": "cualquiera", "edicion": "cualquiera"}

Historial:
Usuario: "harry potter 3"
â†’ {"titulo": "harry potter 3", "editorial": null, "edicion": null}

Historial:
Usuario: "harry potter 3"
Asistente: "Â¿Editorial?"
Usuario: "scholastic"
â†’ {"titulo": "harry potter 3", "editorial": "scholastic", "edicion": null}

ğŸ“ VARIABLES A EXTRAER:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   - titulo: TÃ­tulo OFICIAL del libro (normalizado)
     Tipo: texto, Obligatoria: undefined
   - editorial: Editorial (solo si la menciona)
     Tipo: texto, Obligatoria: undefined
   - edicion: EdiciÃ³n (solo si la menciona)
     Tipo: texto, Obligatoria: undefined

ğŸ” CONTEXTO PARA EXTRACCIÃ“N (historial_completo):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Usuario: Hola
Asistente: Â¡Hola! Â¿En quÃ© puedo ayudarte?
Usuario: Estoy buscando harry potter 3
Asistente: Â¿De quÃ© editorial y ediciÃ³n?
Usuario: no sÃ© la editorial ni la ediciÃ³n

â“ PREGUNTA CRÃTICA:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Â¿CÃ³mo interpreta el formateador "no sÃ© la editorial ni la ediciÃ³n"?

OPCIONES:
A) { titulo: "harry potter 3", editorial: null, edicion: null }
   âŒ INCORRECTO - Causa loop infinito

B) { titulo: "harry potter 3", editorial: "cualquiera", edicion: "cualquiera" }
   âœ… CORRECTO - Va a WooCommerce

ğŸ” VERIFICAR EN EL PROMPT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ“ Menciona "cualquiera": âœ… SÃ
   âœ“ Menciona "no sÃ©": âœ… SÃ
   âœ“ Menciona "dame opciones": âœ… SÃ

âœ… DATOS EXTRAÃDOS (SIMULADOS):
{
  "titulo": "harry potter 3",
  "editorial": "cualquiera",
  "edicion": "cualquiera"
}

ğŸ“‹ VARIABLES GLOBALES ACTUALIZADAS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   telefono_cliente = "5493794946066"
   telefono_empresa = "5493794057297"
   phoneNumberId = "906667632531979"
   mensaje_usuario = "no sÃ© la editorial ni la ediciÃ³n"
   titulo = "harry potter 3"
   editorial = "cualquiera"
   edicion = "cualquiera"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NODO 4: ROUTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ID: router
Tipo: router
Label: Router

ğŸ“‹ RUTAS DISPONIBLES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Faltan datos
   Target: gpt-pedir-datos
   CondiciÃ³n: {{titulo}} not exists OR {{editorial}} not exists OR {{edicion}} not exists

2. Datos completos
   Target: woocommerce
   CondiciÃ³n: {{titulo}} exists AND {{editorial}} exists AND {{edicion}} exists

ğŸ” EVALUACIÃ“N DE CONDICIONES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ruta 1: Faltan datos
CondiciÃ³n: {{titulo}} not exists OR {{editorial}} not exists OR {{edicion}} not exists
   Partes: 3
   Resultados: false, false, false
   OR resultado: false
   âŒ FALSE

Ruta 2: Datos completos
CondiciÃ³n: {{titulo}} exists AND {{editorial}} exists AND {{edicion}} exists
   Partes: 3
   Resultados: true, true, true
   AND resultado: true
   âœ… TRUE - RUTA SELECCIONADA

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DIAGNÃ“STICO FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… FLUJO CORRECTO:
   El formateador extrajo editorial/edicion como "cualquiera"
   El router va a "Datos completos"
   â†’ VA A WOOCOMMERCE âœ…
