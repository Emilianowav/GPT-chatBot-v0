[
  {
    "index": 1,
    "id": "webhook-whatsapp",
    "type": "webhook",
    "label": "WhatsApp Business Cloud",
    "input": {},
    "config": {
      "module": "watch-events",
      "phoneNumberId": "906667632531979",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "systemPrompt": null,
    "output": {
      "message": "Quiero harry potter 3",
      "from": "5493794946066",
      "to": "906667632531979",
      "phoneNumberId": "906667632531979",
      "timestamp": "2026-01-10T10:14:14.721Z",
      "profileName": "Usuario Test"
    },
    "errors": []
  },
  {
    "index": 2,
    "id": "gpt-conversacional",
    "type": "gpt",
    "label": "OpenAI (ChatGPT, Sera...",
    "input": {
      "telefono_cliente": "5493794946066",
      "telefono_empresa": "906667632531979",
      "phoneNumberId": "906667632531979",
      "mensaje_usuario": "Quiero harry potter 3",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "config": {
      "tipo": "conversacional",
      "modelo": "gpt-3.5-turbo",
      "temperatura": 0.7,
      "maxTokens": 500,
      "personalidad": "Eres amigable, profesional y persistente. Ayudas a los clientes de manera conversacional pero SIEMPRE recopilas los 3 datos: t√≠tulo, editorial, edici√≥n.",
      "topicos": [
        {
          "id": "topico-1",
          "titulo": "Especialidad en Libros de Ingl√©s",
          "contenido": "Veo Veo Libros es una librer√≠a especializada en libros en ingl√©s. Ofrecemos una amplia variedad de t√≠tulos, desde cl√°sicos hasta novedades.",
          "keywords": [
            "libros",
            "ingl√©s",
            "especialidad",
            "variedad"
          ]
        },
        {
          "id": "topico-2",
          "titulo": "Formas de Pago",
          "contenido": "Aceptamos efectivo, transferencia bancaria, tarjeta de cr√©dito y d√©bito. Ofrecemos facilidades de pago para compras mayores.",
          "keywords": [
            "pago",
            "efectivo",
            "transferencia",
            "tarjeta"
          ]
        },
        {
          "id": "topico-3",
          "titulo": "Env√≠os",
          "contenido": "Realizamos env√≠os a todo el pa√≠s. El costo y tiempo de entrega dependen de la ubicaci√≥n. Env√≠os gratis en compras mayores a $50000.",
          "keywords": [
            "env√≠os",
            "entrega",
            "pa√≠s",
            "gratis"
          ]
        },
        {
          "id": "topico-4",
          "titulo": "B√∫squeda de Libros",
          "contenido": "Para buscar un libro necesitamos: T√≠tulo (obligatorio), Editorial (obligatorio), Edici√≥n (obligatorio). No aceptamos fotograf√≠as, solo informaci√≥n por escrito.",
          "keywords": [
            "b√∫squeda",
            "t√≠tulo",
            "editorial",
            "edici√≥n"
          ]
        }
      ],
      "variablesRecopilar": [
        {
          "nombre": "titulo",
          "descripcion": "T√≠tulo del libro que busca el cliente",
          "obligatorio": true,
          "tipo": "texto"
        },
        {
          "nombre": "editorial",
          "descripcion": "Editorial del libro - OBLIGATORIO, no aceptar \"no s√©\"",
          "obligatorio": true,
          "tipo": "texto"
        },
        {
          "nombre": "edicion",
          "descripcion": "Edici√≥n del libro - OBLIGATORIO, no aceptar \"no s√©\"",
          "obligatorio": true,
          "tipo": "texto"
        }
      ]
    },
    "systemPrompt": "# PERSONALIDAD\nEres amigable, profesional y persistente. Ayudas a los clientes de manera conversacional pero SIEMPRE recopilas los 3 datos: t√≠tulo, editorial, edici√≥n.\n\n# INFORMACI√ìN DISPONIBLE\nTienes acceso a la siguiente informaci√≥n para responder consultas del usuario:\n\n## 1. Especialidad en Libros de Ingl√©s\nVeo Veo Libros es una librer√≠a especializada en libros en ingl√©s. Ofrecemos una amplia variedad de t√≠tulos, desde cl√°sicos hasta novedades.\nüìå Palabras clave: libros, ingl√©s, especialidad, variedad\n\n## 2. Formas de Pago\nAceptamos efectivo, transferencia bancaria, tarjeta de cr√©dito y d√©bito. Ofrecemos facilidades de pago para compras mayores.\nüìå Palabras clave: pago, efectivo, transferencia, tarjeta\n\n## 3. Env√≠os\nRealizamos env√≠os a todo el pa√≠s. El costo y tiempo de entrega dependen de la ubicaci√≥n. Env√≠os gratis en compras mayores a $50000.\nüìå Palabras clave: env√≠os, entrega, pa√≠s, gratis\n\n## 4. B√∫squeda de Libros\nPara buscar un libro necesitamos: T√≠tulo (obligatorio), Editorial (obligatorio), Edici√≥n (obligatorio). No aceptamos fotograf√≠as, solo informaci√≥n por escrito.\nüìå Palabras clave: b√∫squeda, t√≠tulo, editorial, edici√≥n\n\n# RECOPILACI√ìN DE DATOS\nTu tarea principal es recopilar los siguientes datos del cliente:\n\n## DATOS OBLIGATORIOS:\n1. **titulo** - T√≠tulo del libro que busca el cliente\n   Tipo: texto\n\n2. **editorial** - Editorial del libro - OBLIGATORIO, no aceptar \"no s√©\"\n   Tipo: texto\n\n3. **edicion** - Edici√≥n del libro - OBLIGATORIO, no aceptar \"no s√©\"\n   Tipo: texto\n",
    "output": {
      "respuesta_gpt": "[Respuesta de GPT - no ejecutada]",
      "tokens": 0,
      "costo": 0,
      "titulo": null,
      "editorial": null,
      "edicion": null
    },
    "errors": []
  },
  {
    "index": 3,
    "id": "gpt-formateador",
    "type": "gpt",
    "label": "OpenAI (ChatGPT, Sera...",
    "input": {
      "telefono_cliente": "5493794946066",
      "telefono_empresa": "906667632531979",
      "phoneNumberId": "906667632531979",
      "mensaje_usuario": "Quiero harry potter 3",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "config": {
      "tipo": "formateador",
      "modelo": "gpt-3.5-turbo",
      "variablesRecopilar": [
        {
          "nombre": "titulo",
          "descripcion": "T√≠tulo del libro",
          "obligatorio": true,
          "tipo": "texto"
        },
        {
          "nombre": "editorial",
          "descripcion": "Editorial del libro",
          "obligatorio": false,
          "tipo": "texto"
        },
        {
          "nombre": "edicion",
          "descripcion": "Edici√≥n del libro",
          "obligatorio": false,
          "tipo": "texto"
        }
      ],
      "configuracionExtraccion": {
        "instruccionesExtraccion": "Analiza el historial de conversaci√≥n y extrae la informaci√≥n de b√∫squeda del cliente.\n\nCAMPOS A EXTRAER:\n1. \"titulo\": T√≠tulo del libro mencionado por el cliente (OBLIGATORIO)\n2. \"editorial\": Editorial del libro si fue mencionada (OPCIONAL)\n3. \"edicion\": Edici√≥n del libro si fue mencionada (OPCIONAL)\n\nREGLAS:\n- Si el cliente mencion√≥ el t√≠tulo, extr√°elo aunque no sea exacto\n- Si no mencion√≥ editorial o edici√≥n, deja esos campos como null\n- NO inventes informaci√≥n que el cliente no proporcion√≥\n- Devuelve SOLO el JSON, sin texto adicional\n\nFORMATO DE SALIDA:\n{\n  \"titulo\": \"t√≠tulo mencionado por el cliente o null\",\n  \"editorial\": \"editorial mencionada o null\",\n  \"edicion\": \"edici√≥n mencionada o null\"\n}",
        "fuenteDatos": "historial_completo",
        "cantidadMensajes": 10,
        "formatoSalida": {
          "tipo": "json",
          "estructura": "{ \"titulo\": string, \"editorial\": string | null, \"edicion\": string | null }",
          "ejemplo": "{ \"titulo\": \"Harry Potter 3\", \"editorial\": \"Salamandra\", \"edicion\": \"2020\" }"
        },
        "camposEsperados": [
          {
            "nombre": "titulo",
            "descripcion": "T√≠tulo del libro que busca el cliente",
            "tipoDato": "string",
            "requerido": true,
            "valorPorDefecto": null
          },
          {
            "nombre": "editorial",
            "descripcion": "Editorial del libro",
            "tipoDato": "string",
            "requerido": false,
            "valorPorDefecto": null
          },
          {
            "nombre": "edicion",
            "descripcion": "Edici√≥n del libro",
            "tipoDato": "string",
            "requerido": false,
            "valorPorDefecto": null
          }
        ]
      }
    },
    "systemPrompt": "# RECOPILACI√ìN DE DATOS\nTu tarea principal es recopilar los siguientes datos del cliente:\n\n## DATOS OBLIGATORIOS:\n1. **titulo** - T√≠tulo del libro\n   Tipo: texto\n",
    "output": {
      "respuesta_gpt": "[Respuesta de GPT - no ejecutada]",
      "tokens": 0,
      "costo": 0,
      "titulo": null,
      "editorial": null,
      "edicion": null
    },
    "errors": []
  },
  {
    "index": 4,
    "id": "router",
    "type": "router",
    "label": "Router",
    "input": {
      "telefono_cliente": "5493794946066",
      "telefono_empresa": "906667632531979",
      "phoneNumberId": "906667632531979",
      "mensaje_usuario": "Quiero harry potter 3",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "config": {
      "routes": [
        {
          "id": "route-1",
          "label": "Faltan datos",
          "condition": "{{titulo}} not exists",
          "descripcion": "Si no se extrajo el t√≠tulo del libro"
        },
        {
          "id": "route-2",
          "label": "Datos completos",
          "condition": "{{titulo}} exists",
          "descripcion": "Si ya tenemos al menos el t√≠tulo para buscar"
        }
      ]
    },
    "systemPrompt": null,
    "output": {
      "_routerPath": "[Depende de evaluaci√≥n]",
      "_routerLabel": "[Depende de evaluaci√≥n]"
    },
    "errors": []
  },
  {
    "index": 5,
    "id": "gpt-pedir-datos",
    "type": "gpt",
    "label": "OpenAI (ChatGPT, Sera...",
    "input": {
      "telefono_cliente": "5493794946066",
      "telefono_empresa": "906667632531979",
      "phoneNumberId": "906667632531979",
      "mensaje_usuario": "Quiero harry potter 3",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "config": {
      "tipo": "conversacional",
      "modelo": "gpt-3.5-turbo",
      "temperatura": 0.7,
      "maxTokens": 200
    },
    "systemPrompt": "Eres un asistente de Veo Veo Libros. El cliente no ha especificado qu√© libro busca.\n\nCONTEXTO ACTUAL:\n- T√≠tulo: {{titulo}}\n- Editorial: {{editorial}}\n- Edici√≥n: {{edicion}}\n\nTU TAREA:\nPregunta de manera amable qu√© libro est√° buscando. Pide el t√≠tulo del libro.\n\nIMPORTANTE:\n- S√© breve y directo\n- NO pidas fotograf√≠as, solo informaci√≥n por escrito\n- Si ya tiene el t√≠tulo, pregunta por editorial y edici√≥n\n\nEJEMPLO:\n\"¬°Hola! Para ayudarte a encontrar el libro que buscas, ¬øpodr√≠as decirme el t√≠tulo? üòä\"",
    "output": {
      "respuesta_gpt": "[Respuesta de GPT - no ejecutada]",
      "tokens": 0,
      "costo": 0
    },
    "errors": []
  },
  {
    "index": 6,
    "id": "whatsapp-preguntar",
    "type": "whatsapp",
    "label": "WhatsApp Business Cloud",
    "input": {
      "telefono_cliente": "5493794946066",
      "telefono_empresa": "906667632531979",
      "phoneNumberId": "906667632531979",
      "mensaje_usuario": "Quiero harry potter 3",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "config": {
      "message": "{{gpt-pedir-datos.respuesta_gpt}}",
      "telefono": "{{telefono_cliente}}"
    },
    "systemPrompt": null,
    "output": {
      "status": "sent",
      "to": "{{telefono_cliente}}",
      "message": "{{gpt-pedir-datos.respuesta_gpt}}"
    },
    "errors": []
  },
  {
    "index": 7,
    "id": "woocommerce",
    "type": "woocommerce",
    "label": "WooCommerce",
    "input": {
      "telefono_cliente": "5493794946066",
      "telefono_empresa": "906667632531979",
      "phoneNumberId": "906667632531979",
      "mensaje_usuario": "Quiero harry potter 3",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "config": {
      "apiConfigId": "695320fda03785dacc8d950b",
      "endpointId": "buscar-productos",
      "parametros": {
        "search": "{{busqueda}}",
        "category": "{{categoria}}",
        "per_page": "5",
        "orderby": "relevance"
      }
    },
    "systemPrompt": null,
    "output": {
      "productos": "[Array de productos de WooCommerce]",
      "total_encontrados": 0
    },
    "errors": []
  },
  {
    "index": 8,
    "id": "gpt-resultados",
    "type": "gpt",
    "label": "OpenAI (ChatGPT, Sera...",
    "input": {
      "telefono_cliente": "5493794946066",
      "telefono_empresa": "906667632531979",
      "phoneNumberId": "906667632531979",
      "mensaje_usuario": "Quiero harry potter 3",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "config": {
      "tipo": "formateador",
      "modelo": "gpt-3.5-turbo",
      "temperatura": 0.7,
      "maxTokens": 800
    },
    "systemPrompt": "Eres un asistente de Veo Veo Libros. Tienes que formatear los productos encontrados en WooCommerce para enviarlos por WhatsApp.\n\nDATOS DISPONIBLES:\n- Productos: {{productos}}\n- B√∫squeda: {{titulo}} {{editorial}} {{edicion}}\n\nTU TAREA:\n1. Si hay productos ({{productos}} no est√° vac√≠o):\n   - Muestra cada libro con: t√≠tulo, precio, stock\n   - Usa emojis para hacerlo atractivo (üìö üí∞ ‚úÖ)\n   - S√© breve y claro\n   - M√°ximo 5 productos\n   \n2. Si NO hay productos:\n   - Informa que no se encontraron resultados\n   - Sugiere verificar t√≠tulo, editorial o edici√≥n\n   - Ofrece ayuda para buscar de otra manera\n\nFORMATO EJEMPLO (con productos):\nüìö *Resultados de tu b√∫squeda:*\n\n1. **Harry Potter y el Prisionero de Azkaban**\n   üí∞ Precio: $15.990\n   ‚úÖ Stock disponible\n   \n2. **Harry Potter 3 - Edici√≥n Ilustrada**\n   üí∞ Precio: $24.990\n   ‚ö†Ô∏è √öltimas unidades\n\n¬øTe interesa alguno? üòä\n\nFORMATO EJEMPLO (sin productos):\n‚ùå No encontr√© resultados para \"{{titulo}}\" de {{editorial}}.\n\n¬øPodr√≠as verificar el t√≠tulo o la editorial? Tambi√©n puedo ayudarte a buscar de otra manera üòä",
    "output": {
      "respuesta_gpt": "[Respuesta de GPT - no ejecutada]",
      "tokens": 0,
      "costo": 0
    },
    "errors": []
  },
  {
    "index": 9,
    "id": "whatsapp-resultados",
    "type": "whatsapp",
    "label": "WhatsApp Business Cloud",
    "input": {
      "telefono_cliente": "5493794946066",
      "telefono_empresa": "906667632531979",
      "phoneNumberId": "906667632531979",
      "mensaje_usuario": "Quiero harry potter 3",
      "empresaId": "6940a9a181b92bfce970fdb5"
    },
    "config": {
      "message": "{{gpt-resultados.respuesta_gpt}}",
      "telefono": "{{telefono_cliente}}"
    },
    "systemPrompt": null,
    "output": {
      "status": "sent",
      "to": "{{telefono_cliente}}",
      "message": "{{gpt-resultados.respuesta_gpt}}"
    },
    "errors": []
  }
]